{% extends "layout.html" %}
{% from "macros.html" import render_pagination with context %}
{% block title %}{{ title }}{% endblock %}
{% block body %}
<div class="col-sm-12 col-md-8">
<div class="content"><!-- content -->
    {%- for post in posts.items %}
    <article class="panel panel-default">
        <div class="panel-body">
            <h3><a target="_blank" href="go/?id={{ post.id }}&url={{ post.link }}" title="{{ post.link }}">{{ post.title }}</a></h3>
            <a href="{{ url_for('blog', id=post.blog.id) }}" title="{{ post.blog.url }}">{{ post.blog.name }}</a>

            <div class="media hidden-xs">
            {% if post.thumbnail %}
                <div class="media-left media-top">
                    <img class="media-object" alt="{{ post.id }}" src="http://kottu.org/img/?q=85&src={{ post.thumbnail }}"/></span>
                </div>
            {% endif %}
                <div class="media-body">{{ post.content }}</div>
            </div>
        </div>

        <div class="panel-footer">
            <button class="btn btn-link btn-xs btn-ts" title="{{ post.timestamp | format_time }}">{{ post.timestamp | format_time('human') }}</button>
            <button class="btn btn-primary btn-xs btn-facebook" onClick="window.open('http://www.facebook.com/share.php?u={{ post.link }}',
            'Share on Facebook', 'toolbar=no, scrollbars=yes, width=500, height=400');"
            title="This post was liked/shared {{ post.fbcount }} time(s)">
                <span class="glyphicon glyphicon-share-alt"></span> Shares: {{ post.fbcount }}
            </button>
            <button class="btn btn-link btn-xs pull-right" title="The post popularity is {{ post.buzz }} chilies">
                <img src="http://kottu.org/img/icons/chili{{ post.buzz }}.png" alt="{{ post.buzz }} chilies"/>
            </button>
        </div>
    </article>
    {%- endfor %}

    {% if blog %}
    {{ render_pagination(posts, endpoint, blog.id) }}
    {% else %}
    {{ render_pagination(posts, endpoint) }}
    {% endif %}
</div>
</div>
{% endblock %}